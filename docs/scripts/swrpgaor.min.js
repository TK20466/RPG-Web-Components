function addSkillDirective(e,i,t){app.directive(t,function(){return{restrict:"A",link:function(a,l,n){var s=1;n[t]&&(s=parseInt(n[t])),a.$parent.model.skills[e]={rank:s,attribute:i}}}})}var module=angular.module("starship",[]);module.directive("vehicle",function(){return{templateUrl:"/views/vehicle.html",replace:!0,restrict:"E",transclude:!0,scope:{model:"=?",name:"@",silhouette:"=?",speed:"=?",handling:"=?",fore:"=?",aft:"=?",port:"=?",starboard:"=?",armor:"=?",system:"=?",hull:"=?",hardpoints:"=?",sensorRange:"@",price:"@",rarity:"=?",hardpoints:"=?",passengers:"=?",crew:"@",encum:"=?",navicomputer:"=?",hyperdrive:"@",maker:"@",type:"@",ship:"@",consumables:"@"},controller:["$scope",function(e){null==e.model&&(e.model={name:e.name,silhouette:e.silhouette||3,speed:e.speed||1,handling:e.handling||0,fore:e.fore||0,port:e.port||0,starboard:e.starboard||0,aft:e.aft||0,armor:e.armor||0,hull:e.hull||10,system:e.system||6,hardpoints:e.hardpoints||0,sensorRange:e.sensorRange||"Close",price:e.price,rarity:e.rarity,passengers:e.passengers||0,crew:e.crew||"One pilot",navicomputer:1==e.navicomputer?"Yes":"None",hyperdrive:e.hyperdrive||"none",maker:e.maker,type:e.type,ship:e.ship,consumables:e.consumables,encum:e.encum||6,weapons:[]},e.model.handling>0&&(e.model.handling="+"+e.model.handling))}]}}),module.directive("vehicleStatbar",function(){return{templateUrl:"/views/vehicle-statbar.html",restrict:"E",scope:{model:"=model"},replace:!0}}),module.directive("defenseBlock",function(){return{templateUrl:"/views/defense-block.html",restrict:"E",scope:{model:"=model"},controller:["$scope",function(e){e.silhouette<4&&(e.port="-",e.starboard="-")}],replace:!0}}),module.directive("starshipWeapon",["$sce",function(e){return{transclude:!0,reaplce:!0,restrict:"E",scope:{name:"@",damage:"=",critical:"=?",range:"@",blast:"=?",ion:"=?",guided:"=?",breach:"=?",slowFiring:"=?slowFire",limitedAmmo:"=?ammo",fireArc:"=?arc"},link:function(i,t,a,l,n){var s={name:i.name,damage:i.damage,critical:i.critical,range:i.range||"Short",blast:i.blast,ion:i.ion,guided:i.guided,ammo:i.limitedAmmo,breach:i.breach,slowFiring:i.slowFiring,fireArc:i.fireArc||"Forward"};n(i,function(i,t){for(var a="",l=0;l<i.length;l++)a+=i[l].wholeText||i[l].outerHTML;s.text=e.trustAsHtml(a)});var r=i.$parent.$parent.model;null==r.weapons&&(r.weapons=[]),r.weapons.push(s)}}}]),module.directive("starshipWeaponsBlock",["getSkillStat",function(e){return{templateUrl:"/views/starship-weapon.html",scope:{weapons:"=?weapons"},replace:!0}}]);var app=angular.module("swaor",["starship"]);app.directive("skills",function(){return{replace:!0,restrict:"E",link:function(e,i,t){e.$parent.model.skills={},e.skills=e.$parent.model.skills}}}),app.directive("skillsBlock",function(){return{templateUrl:"/views/skills.html",replace:!0,restrict:"E",link:function(e,i,t){e.skills=e.model.skills,e.skillKeys=function(){var i=[];for(k in e.model.skills)i.push(k);return i.sort()},e.char=e.model,e.getAttr=function(i){return e.char[e.skills[i].attribute]}}}}),app.directive("skill",function(){return{templateUrl:"/views/skill.html",replace:!0,restrict:"E",scope:{name:"=",rank:"=",abty:"=",minion:"=?",hideRank:"=?"},controller:["$scope",function(e){e.pdice=new Array(e.rank),e.abty>e.rank?(e.adice=new Array(e.abty-e.rank),e.pdice=new Array(e.rank)):(e.adice=new Array(e.rank-e.abty),e.pdice=new Array(Math.min(e.rank,e.abty)))}]}}),app.directive("statblock",function(){return{templateUrl:"/views/statblock.html",scope:{value:"=value",display:"@display"},replace:!0}}),app.directive("dynamic",["$compile",function(e){return{restrict:"A",replace:!0,link:function(i,t,a){i.$watch(a.dynamic,function(a){t.html(a),e(t.contents())(i)})}}}]),app.directive("talentBlock",function(){return{templateUrl:"/views/talents.html",scope:{talents:"=?talents"},replace:!0}}),app.directive("talents",["$sce",function(e){return{transclude:!0,restrict:"E",link:function(i,t,a,l,n){n(i,function(i,t){for(var a="",l=0;l<i.length;l++)a+=i[l].wholeText||i[l].outerHTML;t.$parent.model.talents=e.trustAsHtml(a)})}}}]),app.directive("abilitiesBlock",function(){return{templateUrl:"/views/abilities.html",scope:{abilities:"=?abilities"},replace:!0}}),app.directive("equipmentBlock",["getSkillStat",function(e){return{templateUrl:"/views/equipment.html",scope:{equipment:"=?equipment"},controller:["$scope",function(i){i.getRank=function(e){return void 0==i.$parent.skills[e]?0:i.$parent.skills[e].rank},i.getAbility=function(t){var a=e(t);return i.$parent.model[a]},i.isMinion=function(){return"minion"==i.$parent.rank}}],replace:!0}}]),app.directive("abilities",["$sce",function(e){return{transclude:!0,restrict:"E",link:function(i,t,a,l,n){n(i,function(i,t){for(var a="",l=0;l<i.length;l++)a+=i[l].wholeText||i[l].outerHTML;t.$parent.model.abilities=e.trustAsHtml(a)})}}}]),app.directive("weapon",["$sce",function(e){return{transclude:!0,reaplce:!0,restrict:"E",scope:{name:"@",skill:"@",damage:"=",critical:"=?",range:"@",blast:"=?",stun:"=?",quantity:"=?",pierce:"=?",vicious:"=?",autoFire:"=?autoFire",limitedAmmo:"=?ammo"},link:function(i,t,a,l,n){var s={name:i.name,skill:i.skill,damage:i.damage,critical:i.critical,range:i.range,blast:i.blast,quantity:i.quantity,pierce:i.pierce,ammo:i.limitedAmmo,autoFire:i.autoFire,vicious:i.vicious};n(i,function(i,t){for(var a="",l=0;l<i.length;l++)a+=i[l].wholeText||i[l].outerHTML;s.text=e.trustAsHtml(a)});var r=i.$parent.$parent.model;null==r.equipment&&(r.equipment={}),null==r.equipment.weapons&&(r.equipment.weapons=[]),r.equipment.weapons.push(s)}}}]),app.directive("detailBlock",function(){return{templateUrl:"/views/detailblock.html",scope:{value:"=value",display:"@display"},replace:!0}}),app.directive("detailbar",function(){return{templateUrl:"/views/detailbar.html",scope:{model:"=model"},replace:!0}}),app.directive("statbar",function(){return{templateUrl:"/views/statbar.html",scope:{model:"=model"},replace:!0}}),app.directive("die",function(){return{templateUrl:"/views/diesymbol.html",scope:{symbol:"@type"},restrict:"E",replace:!0}}),app.directive("setback",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="setback"}]}}),app.directive("boost",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="boost"}]}}),app.directive("ability",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="ability"}]}}),app.directive("difficulty",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="difficulty"}]}}),app.directive("challenge",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="challenge"}]}}),app.directive("proficiency",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="proficiency"}]}}),app.directive("success",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="success"}]}}),app.directive("failure",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="failure"}]}}),app.directive("advantage",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="advantage"}]}}),app.directive("threat",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="threat"}]}}),app.directive("triumph",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="triumph"}]}}),app.directive("despair",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="despair"}]}}),app.directive("force",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="force"}]}}),app.directive("lightSide",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="lightSide"}]}}),app.directive("darkSide",function(){return{templateUrl:"/views/diesymbol.html",replace:!0,scope:{},restrict:"E",controller:["$scope",function(e){e.symbol="darkSide"}]}}),app.directive("check",function(){return{templateUrl:"/views/check.html",replace:!0,scope:{skill:"@skill",dif:"@dif",chg:"@chg"},controller:["$scope",function(e){var i=parseInt(e.dif);switch(e.difficulty_text="",e.pdice=new Array(parseInt(i)),e.chg&&(e.cdice=new Array(parseInt(e.chg)),i+=parseInt(e.chg)),e.dif=i,i){case 0:e.difficulty_text="Simple";break;case 1:e.difficulty_text="Easy";break;case 2:e.difficulty_text="Average";break;case 3:e.difficulty_text="Hard";break;case 4:e.difficulty_text="Daunting";break;default:e.difficulty_text="Formidable"}}]}}),app.directive("npc",function(){return{templateUrl:"/views/npc.html",replace:!0,transclude:!0,scope:{model:"=?",name:"@",rank:"@",brawn:"=?",agility:"=?",intellect:"=?",cunning:"=?",willpower:"=?",presence:"=?",wounds:"=?",soak:"=?",strain:"=?"},controller:["$scope",function(e){null==e.model&&(e.model={name:e.name,rank:e.rank||"rival",brawn:e.brawn||1,agility:e.agility||1,intellect:e.intellect||1,cunning:e.cunning||1,willpower:e.willpower||1,presence:e.presence||1,wounds:e.wounds||10,soak:e.soak,strain:e.strain,skills:{}})}]}}),app.directive("blackbox",function(){return{templateUrl:"/views/blackbox.html",replace:!0,transclude:!0,scope:{header:"@title"}}}),app.directive("narrative",function(){return{templateUrl:"/views/redbox.html",replace:!0,transclude:!0,restrict:"E",scope:{header:"@title"}}});var skillsTree=function(){return[{name:"Astrogation",attribute:"intelligence"},{name:"Athletics",attribute:"brawn"},{name:"Charm",attribute:"presence"},{name:"Coercion",attribute:"willpower"},{name:"Computers",attribute:"intelligence"},{name:"Cool",attribute:"presence"},{name:"Coordination",attribute:"agility"},{name:"Deception",attribute:"cunning"},{name:"Discipline",attribute:"willpower"},{name:"Leadership",attribute:"presence"},{name:"Mechanics",attribute:"intelligence"},{name:"Medicine",attribute:"intelligence"},{name:"Negotiation",attribute:"presence"},{name:"Perception",attribute:"cunning"},{name:"Piloting (Planetary)",attribute:"agility",alias:"pilotingPlanetary"},{name:"Piloting (Space)",attribute:"agility",alias:"pilotingSpace"},{name:"Resilience",attribute:"brawn"},{name:"Skulduggery",attribute:"cunning"},{name:"Stealth",attribute:"agility"},{name:"Streetwise",attribute:"cunning"},{name:"Survival",attribute:"cunning"},{name:"Vigilance",attribute:"willpower"},{name:"Brawl",attribute:"brawn"},{name:"Gunnery",attribute:"agility"},{name:"Melee",attribute:"brawn"},{name:"Ranged (Light)",attribute:"agility",alias:"rangedLight"},{name:"Ranged (Heavy)",attribute:"agility",alias:"rangedHeavy"},{name:"Core Worlds",attribute:"intelligence",alias:"coreWorlds"},{name:"Education",attribute:"intelligence"},{name:"Lore",attribute:"intelligence"},{name:"Outer Rim",attribute:"intelligence",alias:"outerRim"},{name:"Underworld",attribute:"intelligence"},{name:"Xenology",attribute:"intelligence"}]};app.factory("skillInfo",[function(){return skillsTree()}]),app.service("getSkillStat",["skillInfo",function(e){return function(i){for(var t=0;t<e.length;t++)if(e[t].name.toLowerCase()==i.toLowerCase())return e[t].attribute}}]);for(var skills=skillsTree(),i=0;i<skills.length;i++){var name=skills[i].alias;null!=name&&"undefined"!=name||(name=skills[i].name.toLowerCase()),addSkillDirective(skills[i].name,skills[i].attribute,name)}angular.module("swaor").run(["$templateCache",function(e){e.put("/views/abilities.html",'<div class="npc-abilities"><div class="npc-details-bold">Abilities:</div><div class="npc-details-normal" ng-if="abilities" dynamic="abilities"></div><div class="npc-details-normal" ng-if="!abilities">None.</div></div>'),e.put("/views/blackbox.html",'<div class="cornered blackbox"><h4 ng-if="header">{{header}}</h4><p ng-transclude></p></div>'),e.put("/views/check.html",'<span class="check">{{difficulty_text}} (<span ng-repeat="c in cdice track by $index"><challenge></span><span ng-repeat="p in pdice track by $index"><difficulty></span>) <span class="skill-name">{{skill}}</span> check</span>'),e.put("/views/defense-block.html",'<div class="vehicle-defense-block"><div class="vehicle-defense-block-title">Def: Fore/Port/Starboard/Aft</div><div class="vehicle-defense-block-fore">{{model.fore}}</div><div class="vehicle-defense-block-port">{{model.port}}</div><div class="vehicle-defense-block-starboard">{{model.starboard}}</div><div class="vehicle-defense-block-aft">{{model.aft}}</div></div>'),e.put("/views/detailbar.html",'<div class="detail-bar"><detail-block ng-if="model.soak" value="model.soak" display="soak"></detail-block><detail-block ng-if="model.wounds" value="model.wounds" display="w. threshold"></detail-block><detail-block ng-if="model.strain" value="model.strain" display="s. threshold"></detail-block></div>'),e.put("/views/detailblock.html",'<div class="detail-block"><div class="detail-block-text">{{display}}</div><div class="detail-block-value">{{value}}</div></div>'),e.put("/views/diesymbol.html",'<i class="die-symbol" ng-class="symbol"></i>'),e.put("/views/equipment.html",'<div class="npc-equipment"><div class="npc-details-bold">Equipment:</div><div class="npc-details-normal" ng-if="equipment && equipment.weapons" ng-repeat="item in equipment.weapons"><span class="weapon-name"><span ng-if="item.quantity">{{item.quantity}} </span>{{item.name}} </span><span class="weapon-details">(<skill hide-rank="true" name="item.skill" rank="getRank(item.skill)" abty="getAbility(item.skill)" minion="isMinion()"></skill>; Damage: {{item.damage}}; Critical: {{item.critical}}; Range [<span class="weapon-range">{{item.range}}</span>]; <span ng-if="item.pierce">Piece {{item.pierce}};</span> <span ng-if="item.blast">Blast {{item.blast}};</span> <span ng-if="item.vicious">Vicious {{item.vicious}};</span> <span ng-if="item.ammo">Limited Ammo {{item.ammo}};</span> <span ng-if="item.autoFire">Auto Fire;</span> <span ng-if="item.stun">Stun setting</span> <span dynamic="item.text"></span>)</span></div><div class="npc-details-normal" ng-if="!equipment">None.</div></div>'),e.put("/views/npc.html",'<div class="npc-wrapper"><h4 ng-if="model.name">{{model.name}} <span ng-if="model.rank">[{{model.rank}}]</span></h4><statbar model="model"></statbar><detailbar model="model"></detailbar><ng-transclude></ng-transclude><skills-block></skills-block><talent-block talents="model.talents"></talent-block><abilities-block abilities="model.abilities"></abilities-block><equipment-block equipment="model.equipment"></equipment-block></div>'),e.put("/views/planet.html",'<md-slider-container><div flex="10" layout layout-align="center center"><span class="md-body-1">Scarcity</span></div><md-slider flex md-discrete ng-model="item" step="1" min="-2" max="4" aria-label="Scarcity"></md-slider><scarcity-display value="item" flex></scarcity-display></md-slider-container>'),e.put("/views/rarity.html",'<md-slider-container><div flex="10" layout layout-align="center center"><span class="md-body-1">Rarity</span></div><md-slider flex md-discrete ng-model="item" step="1" min="1" max="10" aria-label="Rarity"></md-slider><md-input-container><input disabled="disabled" flex type="number" ng-model="item" aria-label="green" aria-controls="green-slider"></md-input-container></md-slider-container>'),e.put("/views/redbox.html",'<div class="center-children redbox-wrapper"><div class="cornered redbox"><p ng-transclude></p></div></div>'),e.put("/views/scarcityDisplay.html",'<md-icon md-svg-src="{{scarcityIcon()}}" class="name"></md-icon><span flex>{{scarcityText()}}</span>'),e.put("/views/skill.html",'<span class="skill"><span class="skill-name">{{name}}</span> <span ng-if="!minion"><span ng-if="!hideRank">{{rank}}</span> (<span ng-repeat="p in pdice track by $index"><proficiency></proficiency></span><span ng-repeat="a in adice track by $index"><ability></ability></span>)</span><span ng-if="minion"> (varies by number)</span></span>'),e.put("/views/skills.html",'<div class="npc-skills"><div class="npc-details-bold" ng-if="char.rank != \'minion\'">Skills:</div><div class="npc-details-bold" ng-if="char.rank == \'minion\'">Skills (group only):</div><div class="npc-details-normal" ng-repeat="key in skillKeys()"><skill name="key" rank="skills[key].rank" abty="getAttr(key)" minion="char.rank == \'minion\'"></skill><span ng-if="!$last">,</span><span ng-if="$last">.</span></div><div class="npc-details-normal" ng-if="skillKeys().length === 0">None.</div></div>'),e.put("/views/starship-weapon.html",'<div class="npc-equipment"><div class="npc-details-bold">Weapons:</div><div class="npc-details-normal" ng-if="weapons" ng-repeat="item in weapons"><span class="weapon-name">{{item.name}} </span><span class="weapon-details">(Fire Arc {{item.fireArc}}; Damage: {{item.damage}}; Critical: {{item.critical}}; Range [<span class="weapon-range">{{item.range}}</span>]; <span ng-if="item.linked">Linked {{item.linked}};</span> <span ng-if="item.blast">Blast {{item.blast}};</span> <span ng-if="item.breach">Breach {{item.breach}};</span> <span ng-if="item.guided">Guided {{item.guided}};</span> <span ng-if="item.ammo">Limited Ammo {{item.ammo}};</span> <span ng-if="item.slowFiring">Slow Firing {{item.slowFiring}};</span> <span ng-if="item.ion">Ion;</span><span dynamic="item.text"></span>)</span><br></div><div class="npc-details-normal" ng-if="!weapons">None.</div></div>'),e.put("/views/statbar.html",'<div class="stat-bar"><statblock display="Brawn" value="model.brawn"></statblock><statblock display="Agility" value="model.agility"></statblock><statblock display="Intellect" value="model.intellect"></statblock><statblock display="Cunning" value="model.cunning"></statblock><statblock display="Willpower" value="model.willpower"></statblock><statblock display="Presence" value="model.presence"></statblock></div>'),e.put("/views/statblock.html",'<div class="stat-block"><div class="stat-block-value">{{value}}</div><div class="stat-block-text">{{display}}</div></div>'),e.put("/views/talents.html",'<div class="npc-talents"><div class="npc-details-bold">Talents:</div><div class="npc-details-normal" ng-if="talents" dynamic="talents"></div><div class="npc-details-normal" ng-if="!talents">None.</div></div>'),e.put("/views/vehicle-statbar.html",'<div class="vehicle-stat-bar"><div class="vehicle-stat-core"><statblock display="Silhouette" value="model.silhouette"></statblock><statblock display="Speed" value="model.speed"></statblock><statblock display="Handling" value="model.handling"></statblock></div><div class="vehicle-stat-attributes"><defense-block model="model"></defense-block><detail-block value="model.armor" display="Armor"></detail-block><detail-block value="model.system" display="SS Threshold"></detail-block><detail-block value="model.hull" display="HT Threshold"></detail-block></div></div>'),e.put("/views/vehicle.html",'<div class="starship-wrapper"><h4 ng-if="model.name">{{model.name}}</h4><vehicle-statbar model="model"></vehicle-statbar><ng-transclude></ng-transclude><div class="npc-equipment" ng-if="model.type"><div class="npc-details-bold">Hull Type<span ng-if="model.ship">/Model</span>:</div><div class="npc-details-normal">{{model.type}}<span ng-if="model.ship">/{{model.ship}}</span></div></div><div class="npc-equipment" ng-if="model.maker"><div class="npc-details-bold">Manufacturer:</div><div class="npc-details-normal">{{model.maker}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Hyperdrive:</div><div class="npc-details-normal">{{model.hyperdrive}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Navicomputer:</div><div class="npc-details-normal">{{model.navicomputer}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Sensor Range:</div><div class="npc-details-normal">{{model.sensorRange}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Ship Complement:</div><div class="npc-details-normal">{{model.crew}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Encumbrance Capacity:</div><div class="npc-details-normal">{{model.encum}}</div></div><div class="npc-equipment"><div class="npc-details-bold">Passenger Capacity:</div><div class="npc-details-normal">{{model.passengers}}</div></div><div class="npc-equipment" ng-if="model.consumables"><div class="npc-details-bold">Consumables:</div><div class="npc-details-normal">{{model.consumables}}</div></div><div class="npc-equipment" ng-if="model.price"><div class="npc-details-bold">Price<span ng-if="model.rarity">/Rarity</span>:</div><div class="npc-details-normal">{{model.price}} credits<span ng-if="model.rarity">/{{model.rarity}}</span></div></div><div class="npc-equipment"><div class="npc-details-bold">Customization Hard Points:</div><div class="npc-details-normal">{{model.hardpoints}}</div></div><starship-weapons-block weapons="model.weapons"></starship-weapons-block></div>')}]);